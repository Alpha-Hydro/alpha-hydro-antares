// Generated by CoffeeScript 1.10.0
(function() {
  (function($) {
    var ajaxResponseContent, dropdoun, googleResponseContent, urlParam;
    ajaxResponseContent = $('#search-autocomplete');
    googleResponseContent = $('#google-search');
    dropdoun = $('.dropdown');
    $(document).on('keyup', '#search-query', function(e) {
      var value;
      value = $(this).val();
      console.log(e.keyCode);
      return $.ajax({
        url: '/search/index/autocomplete/',
        type: 'post',
        dataType: 'html',
        data: {
          query: value
        },
        error: function(jqXHR, textStatus, errorThrown) {
          return ajaxResponseContent.html("AJAX Error: " + textStatus);
        },
        success: function(data, textStatus, jqXHR) {
          console.log(data);
          ajaxResponseContent.html(data);
          if (data !== '') {
            return dropdoun.addClass('open');
          } else {
            return dropdoun.removeClass('open');
          }
        }
      });
    });
    return urlParam = function(name) {
      var result;
      result = new RegExp('[\?&]' + name + '=([^&#]*)').exec(document.location.search);
      return result[1] || 0;
    };

    /*googleSearch = (q)->
      $.ajax
        url: 'https://www.googleapis.com/customsearch/v1'
        type: 'get'
        dataType: 'json'
        data:
          key: 'AIzaSyA4c9AkQoBRpYIgHNJSUqLs0MGb4v6c6Fc'
          cx: '002321161471768174809:g2hp7ihrj1u'
          q: q
        error: (jqXHR, textStatus, errorThrown) ->
          console.log "AJAX Error: #{textStatus}"
        success: (data, textStatus, jqXHR) ->
     *        console.log data.searchInformation.totalResults
          searchResult data
     */

    /*searchResult = (data)->
     *    console.log data
      items = data.items
      for item in items
        link = item.link
        title = item.title
        snippet = item.snippet
    
        html = '<div>'+title+'</div>'
        html += '<div>'+snippet+'</div>'
        html += '<div>'+link+'</div>'
        googleResponseContent.append html
     */

    /*query = urlParam 'query'
    console.log decodeURIComponent query
    
    googleSearch decodeURIComponent query if query?
     */
  })(jQuery);

}).call(this);

//# sourceMappingURL=search.js.map
